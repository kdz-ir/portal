"use strict";(self.webpackChunkkdz_portal=self.webpackChunkkdz_portal||[]).push([[418],{7418:(x,g,u)=>{u.r(g),u.d(g,{DormitoryModule:()=>B});var s=u(6630),m=u(2143),c=u(1441),t=u(4650),i=u(4006),f=u(2340),y=u(529);let p=(()=>{class o{constructor(e){this._http=e,this._url=f.N.url+"/api/v1/account/jam/dormitory"}get dorms(){return this._http.get(this._url)}register(e){return this._http.post(this._url,e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(y.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var C=u(9549),v=u(4859),a=u(4385),h=u(3238),d=u(3546);function F(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0646\u0627\u0645 "),t.qZA())}function Z(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",e.profile.name+" "+e.profile.family," ")}}function T(o,n){1&o&&t._UZ(0,"th",14)}function A(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.index;t.xp6(1),t.hij(" ",e+1," ")}}function D(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0634\u0645\u0627\u0631\u0647 \u067e\u06cc\u06af\u06cc\u0631\u06cc"),t.qZA())}function I(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;let r;t.xp6(1),t.hij(" ",null!==(r=null==e.dormitory?null:e.dormitory.refId)&&void 0!==r?r:"-"," ")}}function R(o,n){1&o&&(t.TgZ(0,"th",14),t._uU(1," \u0647\u0632\u06cc\u0646\u0647"),t.qZA())}function J(o,n){if(1&o&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&o){const e=n.$implicit;t.xp6(1),t.hij(" ",null==e.dormitory?null:e.dormitory.refId," ")}}function P(o,n){1&o&&(t.TgZ(0,"th",16),t._uU(1,"\u0633\u0628\u06a9 \u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA())}function Q(o,n){if(1&o&&(t.TgZ(0,"td",15)(1,"mat-form-field")(2,"mat-label"),t._uU(3,"\u067e\u0630\u06cc\u0631\u0627\u06cc\u06cc"),t.qZA(),t.TgZ(4,"mat-select",17)(5,"mat-option",18),t._uU(6,"\u0628\u062f\u0648\u0646 \u063a\u0630\u0627- \u06f7\u06f5\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA(),t.TgZ(7,"mat-option",18),t._uU(8,"\u0641\u0642\u0637 \u0634\u0627\u0645- \u06f5\u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA(),t.TgZ(9,"mat-option",18),t._uU(10," \u0646\u0627\u0647\u0627\u0631 \u0634\u0627\u0645-\u06f9\u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA(),t.TgZ(11,"mat-option",18),t._uU(12,"\u0635\u0628\u062d\u0627\u0646\u0647 \u0646\u0627\u0647\u0627\u0631 \u0634\u0627\u0645 -\u06f1\u06f1\u06f5\u06f0\u06f0\u06f0\u06f0\u06f0\u0631\u06cc\u0627\u0644"),t.qZA()()()()),2&o){const e=n.$implicit;t.xp6(4),t.Q6J("formControlName",e.profile.nationalCode),t.xp6(1),t.Q6J("value",1),t.xp6(2),t.Q6J("value",2),t.xp6(2),t.Q6J("value",3),t.xp6(2),t.Q6J("value",4)}}function S(o,n){1&o&&t._UZ(0,"tr",19)}function N(o,n){1&o&&t._UZ(0,"tr",20)}const U=[{path:"",component:(()=>{class o{constructor(e,r,l){this._fb=r,this._dormRepository=l,this.displayedColumns=["index","name","action","refId"],this.dorms=e.snapshot.data.dorms,this.dataSource=new m.by(this.dorms),this.fRecord=r.record({})}ngOnInit(){for(const e of this.dorms){const r=this._fb.control(e.dormitory?.type);(0,c.Z)(e.dormitory?.authority)||r.disable(),this.fRecord.addControl(e.profile.nationalCode,r)}}onSubmit(){const e=[];for(const l of this.dorms.filter(j=>(0,c.Z)(j.dormitory?.refId)))(0,c.Z)(this.fRecord.value[l.profile.nationalCode])||e.push({nationalCode:l.profile.nationalCode,type:this.fRecord.value[l.profile.nationalCode]});this._dormRepository.register({dorms:e}).subscribe(l=>window.location.replace(l.action))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(s.gz),t.Y36(i.qu),t.Y36(p))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-index-page"]],decls:26,vars:5,consts:[[3,"formGroup","submit"],["mat-table","",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","index"],["matColumnDef","refId"],["matColumnDef","amount"],["matColumnDef","action"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["align","end"],["mat-stroked-button","","type","submit",3,"disabled"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],[3,"formControlName"],[3,"value"],["mat-header-row",""],["mat-row",""]],template:function(e,r){1&e&&(t.TgZ(0,"form",0),t.NdJ("submit",function(){return r.onSubmit()}),t.TgZ(1,"mat-card")(2,"mat-card-title"),t._uU(3,"\u062e\u0648\u0627\u0628\u06af\u0627\u0647"),t.qZA(),t.TgZ(4,"mat-card-content")(5,"table",1),t.ynx(6,2),t.YNc(7,F,2,0,"th",3),t.YNc(8,Z,2,1,"td",4),t.BQk(),t.ynx(9,5),t.YNc(10,T,1,0,"th",3),t.YNc(11,A,2,1,"td",4),t.BQk(),t.ynx(12,6),t.YNc(13,D,2,0,"th",3),t.YNc(14,I,2,1,"td",4),t.BQk(),t.ynx(15,7),t.YNc(16,R,2,0,"th",3),t.YNc(17,J,2,1,"td",4),t.BQk(),t.ynx(18,8),t.YNc(19,P,2,0,"th",9),t.YNc(20,Q,13,5,"td",4),t.BQk(),t.YNc(21,S,1,0,"tr",10),t.YNc(22,N,1,0,"tr",11),t.qZA()(),t.TgZ(23,"mat-card-actions",12)(24,"button",13),t._uU(25,"\u067e\u0631\u062f\u0627\u062e\u062a"),t.qZA()()()()),2&e&&(t.Q6J("formGroup",r.fRecord),t.xp6(5),t.Q6J("dataSource",r.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",r.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",r.displayedColumns),t.xp6(2),t.Q6J("disabled",r.fRecord.invalid))},dependencies:[i._Y,i.JJ,i.JL,i.sg,i.u,C.KE,C.hX,v.lW,a.gD,h.ey,m.BZ,m.fO,m.as,m.w1,m.Dz,m.nj,m.ge,m.ev,m.XQ,m.Gk,d.a8,d.hq,d.dn,d.n5]}),o})(),resolve:{dorms:o=>(0,t.f3M)(p).dorms}}];let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[s.Bz.forChild(U),s.Bz]}),o})();var M=u(35);let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[M._,Y,d.QW]}),o})()},35:(x,g,u)=>{u.d(g,{_:()=>v});var s=u(9759),m=u(9602),c=u(3238),t=u(5784),i=u(5412),f=u(4650);let y=(()=>{class a{}return a.\u0275fac=function(d){return new(d||a)},a.\u0275mod=f.oAB({type:a}),a.\u0275inj=f.cJS({providers:[{provide:c._A,useClass:t.e,deps:[c.Ad]},{provide:c.sG,useValue:t.A}],imports:[s.m,m.FA,i.Is]}),a})();var p=u(2143),C=u(3546);let v=(()=>{class a{}return a.\u0275fac=function(d){return new(d||a)},a.\u0275mod=f.oAB({type:a}),a.\u0275inj=f.cJS({imports:[s.m,y,p.p0,C.QW,s.m,y,p.p0,C.QW]}),a})()}}]);